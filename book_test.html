<!DOCTYPE html>
<html>

<meta charset="UTF-8">

<head>
    <link rel="shortcut icon" href="./public/img/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="./public/img/favicon.ico" type="image/x-icon" />

    <title>책잡이</title>

    <link rel="stylesheet" href="./public/css/base_css/reset.css">
    <link rel="stylesheet" href="./public/css/base_css/header.css">
    <link rel="stylesheet" href="./public/css/base_css/footer.css">
    <link rel="stylesheet" href="./public/css/recommend_css/book_test.css">
    <link rel="stylesheet" href="./public/fonts/font.css">

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="./src/js/includeHtml.js"></script>
    <script type="text/javascript" src="./src/js/completed.js"></script>
    <script>
        let cnt = -1;
        let temp = 0;
        let sum = 0;

        let question = ['책을 훑어볼 때', '책 좀 읽어볼까?', '시험 망했네..', '갑자기 친구가 울면',
            '영화 뭐 볼까?', '그토록 기다리던 휴일날이네', '물건을 살 때, 중요한 게 생각하는 건?', '만화를 볼 때 중요한 건?', '비슷한 초코과자가 있네',
            '평소 좋아하는 감독님의 새로운 영화가 개봉했다.<br> 근데 내가 싫어하는 장르네?', '오랜만에 청소 좀 해볼까, 뭐 부터 치우지?',
            '드라마 시청 중에 말도 안 되는 막장 전개가 이어질 때', '친구들이랑 하루종일 놀고 집에 도착했다',
            '친구와 같이 길을 걸어가다가, <br> 갑자기 친구가 넘어졌다', '용돈을 받았다', '나는 평소에', '모르는 문제가 생겼네',
            '심혈을 기울여서 쓰는 부분은?', '나에게 좋은 사람은', '오늘 저녁 뭐 먹지'];

        $(function () {
            $('.startbtn').on('click', function () {
                $(".startbtn").remove(".startbtn");
                $(".test-img").css('display', 'none');
                $(".test-img2").css('display', 'block');
                $(".editbtn").css('display', 'block');
                $(".startQuestion").css('display', 'none');
                $(".progressBar").css('display', 'block');
                $(".question").css('display', 'block');

                cnt++;
                console.log('index:' + cnt);
                temp = cnt;
                $(`.options${cnt}`).css('display', 'block');

                // console.log("첫 .options temp >>" + temp);
                console.log("첫 .options cnt >>" + cnt);
                $(".question").html(question[cnt]);
                $(".option1").click(function () {
                    if (cnt < 19) {
                        cnt++;
                        sum = (5 * cnt);
                        $(".bar").css('width', sum + '%');
                        console.log(')) cnt : ' + cnt + ", sum : " + sum + '%');
                        temp = cnt - 1;
                        $(`.options${temp}`).css('display', 'none');
                        // console.log(".options temp >>" + temp);
                        $(`.options${cnt}`).css('display', 'block');
                        console.log(".options cnt >>" + cnt);

                        $(".question").html(question[cnt]);
                    }
                    else if (cnt > 18) {
                        $(".test-img2").remove(".test-img2");
                        $(".editbtn").remove(".editbtn");
                        $(".startQuestion").remove(".startQuestion");
                        $(".progressBar").remove(".progressBar");
                        $(".question").remove(".question");
                        $(".option1").remove("option1");
                        $(".option2").remove("option2");
                        $(".options19").css('display', 'none');
                        $(".result").css('display', 'block');
                    }
                })


                $(".option2").click(function () {
                    if (cnt < 19) {
                        cnt++;
                        sum = (5 * cnt);
                        $(".bar").css('width', sum + '%');
                        console.log(')) cnt : ' + cnt + ", sum : " + sum);

                        temp = cnt - 1;
                        $(`.options${temp}`).css('display', 'none');
                        // console.log(".options temp >>" + temp);
                        $(`.options${cnt}`).css('display', 'block');
                        console.log(".options cnt >>" + cnt);

                        $(".question").html(question[cnt]);
                    }
                    else if (cnt > 18) {
                        $(".test-img2").remove(".test-img2");
                        $(".editbtn").remove(".editbtn");
                        $(".startQuestion").remove(".startQuestion");
                        $(".progressBar").remove(".progressBar");
                        $(".question").remove(".question");
                        $(".option1").remove("option1");
                        $(".option2").remove("option2");
                        $(".options19").css('display', 'none');
                        $(".result").css('display', 'block');
                    }
                })
            })

            $('.arrow_right').on('click', function () {
                if (!($(`input:radio[name=op${cnt}]`).is(':checked'))) {

                    alert('문항을 선택해주세요.');
                    console.log('cnt >>' + $(`input:radio[name=op${cnt}]`).is(':checked'));
                    console.log(`input:radio[name=op${cnt}]`);
                }

                else if (cnt < 19) {

                    sum += 5;
                    $(".bar").css('width', sum + '%');
                    console.log(')) cnt : ' + cnt + ", sum : " + sum + '%');
                    cnt++;
                    console.log('index:' + cnt);
                    temp = cnt - 1;

                    $(`.options${temp}`).css('display', 'none');
                    // console.log(".options temp >>" + temp);
                    $(`.options${cnt}`).css('display', 'block');
                    console.log(".options cnt >>" + cnt);
                    $(".question").html(question[cnt]);
                }
            })

            $(".arrow_left").on('click', function () {

                if (cnt > 0) {
                    sum -= 5;
                    $(".bar").css('width', sum + '%');
                    console.log('2)) cnt : ' + cnt + ", sum : " + sum);

                    cnt--;
                    console.log('index: ' + cnt);
                    temp = cnt + 1;

                    $(`.options${temp}`).css('display', 'none');
                    // console.log("back .options temp >>" + temp);

                    $(`.options${cnt}`).css('display', 'block');
                    console.log("back .options cnt >>" + cnt);
                    $(".question").html(question[cnt]);

                }
                else if (cnt <= 0) {
                    $('.menubar').css('height', '200px').css('box-shadow', 'none');
                    alert('첫번째 전은 없습니다.');
                    console.log('마지막..index:' + cnt);
                }
            });

        })

    </script>
</head>

<body>
    <include-html target="./header.php" completed="headerCompleted"></include-html>

    <div id="book_test">

        <h1>인생 책 찾기 테스트</h1>
        <hr>
        <div class="test-wrap">

            <div class="progressBar">
                <div class="bar"></div>
            </div>

            <img img src="./public/img/test1.jpg" class="test-img" alt="테스트시작사진1">
            <img img src="./public/img/icon_q.png" class="test-img2" alt="질문이미지">

            <div class="wrap">
                <div class="startQuestion">질문들을 통해 당신에게<br> 어울리는 책을 추천해드려요.<br><br>
                    질문은 총 20문항이고<br>소요시간은 약 3분정도 입니다.
                </div>

                <div class="question"></div>

                <ul class="options0">
                    <li><input type="radio" name="op0" id="test1" class="option1" onclick="test('b')">
                        <label for="test1">전체적으로</label>
                    </li>
                    <li><input type="radio" name="op0" id="test2" class="option2" onclick="test('c')">
                        <label for="test2">중요한 부분만</label>
                    </li>
                </ul>

                <ul class="options1">
                    <li><input type="radio" name="op1" id="test3" class="option1" onclick="test('d')">
                        <label for="test3">Yes12이나 말라딘와 같은 책 사이트에 들어간다.</label>
                    </li>
                    <li><input type="radio" name="op1" id="test4" class="option2" onclick="test('a')">
                        <label for="test4">동네도서관이나 학교도서관에 간다.</label>
                    </li>
                </ul>

                <ul class="options2">
                    <li><input type="radio" name="op2" id="test5" class="option1" onclick="test('a')">
                        <label for="test5">떡볶이나 먹자</label>
                    </li>
                    <li><input type="radio" name="op2" id="test6" class="option1" onclick="test('b')">
                        <label for="test6">다음 시험 때는 같은 결과를 반복하지 않도록 계획을 세운다.</label>
                    </li>
                </ul>

                <ul class="options3">
                    <li><input type="radio" name="op3" id="test7" onclick="test('a')">
                        <label for="test7" class="option1">묵묵히 위로를 해준다.</label>
                    </li>
                    <li><input type="radio" name="op3" id="test8" onclick="test('b')">
                        <label for="test8" class="option2">무슨 일 있었어?</label>
                    </li>
                </ul>

                <ul class="options4">
                    <li><input type="radio" name="op4" id="test9" onclick="test('b')">
                        <label for="test9" class="option1">베네딕트 컴버배치가 나오는 셜록홈즈</label>
                    </li>
                    <li><input type="radio" name="op4" id="test10" onclick="test('c')">
                        <label for="test10" class="option2">천둥의 신 토르가 나오는 어벤져스</label>
                    </li>
                </ul>

                <ul class="options5">
                    <li><input type="radio" name="op5" id="test11" onclick="test('a')">
                        <label for="test11" class="option1">집에서 잠이나 자자</label>
                    </li>
                    <li><input type="radio" name="op5" id="test12" onclick="test('c')">
                        <label for="test12" class="option2">친구들이랑 오랜만에 놀아야지.</label>
                    </li>
                </ul>

                <ul class="options6">
                    <li><input type="radio" name="op6" id="test13" onclick="test('b')">
                        <label for="test13" class="option1">구매 후기</label>
                    </li>
                    <li><input type="radio" name="op6" id="test14" onclick="test('d')">
                        <label for="test14" class="option2">가성비</label>
                    </li>
                </ul>

                <ul class="options7">
                    <li><input type="radio" name="op7" id="test15" onclick="test('a')">
                        <label for="test15" class="option1">눈이 즐거운 그림체지</label>
                    </li>
                    <li><input type="radio" name="op7" id="test16" onclick="test('b')">
                        <label for="test16" class="option2">스토리가 탄탄해야해</label>
                    </li>
                </ul>

                <ul class="options8">
                    <li><input type="radio" name="op8" id="test17" onclick="test('c')">
                        <label for="test17" class="option1">양이 많은 초코과자 A</label>
                    </li>
                    <li><input type="radio" name="op8" id="test18" onclick="test('d')">
                        <label for="test18" class="option2">A보다 더 맛있는 초코과자 B</label>
                    </li>
                </ul>

                <ul class="options9">
                    <li><input type="radio" name="op9" id="test19" onclick="test('a')">
                        <label for="test19" class="option1">좋아하는 감독님 작품이니까, 믿고 본다</label>
                    </li>
                    <li><input type="radio" name="op9" id="test20" onclick="test('c')">
                        <label for="test20" class="option2">다른 영화를 본다.</label>
                    </li>
                </ul>

                <ul class="options10">
                    <li><input type="radio" name="op10" id="test21" onclick="test('b')">
                        <label for="test21" class="option1">책상부터</label>
                    </li>
                    <li><input type="radio" name="op10" id="test22" onclick="test('c')">
                        <label for="test22" class="option2">방바닥부터</label>
                    </li>
                </ul>

                <ul class="options11">
                    <li><input type="radio" name="op11" id="test23" onclick="test('a')">
                        <label for="test23" class="option1">어떤 엔딩일지 궁금해한다.</label>
                    </li>
                    <li><input type="radio" name="op11" id="test24" onclick="test('b')">
                        <label for="test24" class="option2">이게 뭐지? 채널를 돌린다.</label>
                    </li>
                </ul>

                <ul class="options12">
                    <li><input type="radio" name="op12" id="test25" onclick="test('d')">
                        <label for="test25" class="option1">오늘 있었던 일을 잊지 않도록 일기 써야지</label>
                    </li>
                    <li><input type="radio" name="op12" id="test26" onclick="test('c')">
                        <label for="test26" class="option2">피곤하다, 얼른 씻고 자자</label>
                    </li>
                </ul>

                <ul class="options13">
                    <li><input type="radio" name="op13" id="test27" onclick="test('d')">
                        <label for="test27" class="option1">괜찮아? 안 다쳤어?</label>
                    </li>
                    <li><input type="radio" name="op13" id="test28" onclick="test('b')">
                        <label for="test28" class="option2">갑자기 왜 넘어진거야?</label>
                    </li>
                </ul>

                <ul class="options14">
                    <li><input type="radio" name="op14" id="test29" onclick="test('c')">
                        <label for="test29" class="option1">앞으로 쓸 지출들을 계산해본다.</label>
                    </li>
                    <li><input type="radio" name="op14" id="test30" onclick="test('a')">
                        <label for="test30" class="option2">사고 싶었던 물건들을 산다.</label>
                    </li>
                </ul>

                <ul class="options15">
                    <li><input type="radio" name="op15" id="test31" onclick="test('a')">
                        <label for="test31" class="option1">남 눈치를 많이 보는 것 같아</label>
                    </li>
                    <li><input type="radio" name="op15" id="test32" onclick="test('b')">
                        <label for="test32" class="option2">너무 내 생각만 하나?</label>
                    </li>
                </ul>

                <ul class="options16">
                    <li><input type="radio" name="op16" id="test33" onclick="test('c')">
                        <label for="test33" class="option1">알 때까지 인터넷 검색을 한다.</label>
                    </li>
                    <li><input type="radio" name="op16" id="test34" onclick="test('d')">
                        <label for="test34" class="option2">선생님께 여쭤본다.</label>
                    </li>
                </ul>

                <ul class="options17">
                    <li><input type="radio" name="op17" id="test35" onclick="test('d')">
                        <label for="test35" class="option1">감상평</label>
                    </li>
                    <li><input type="radio" name="op17" id="test36" onclick="test('b')">
                        <label for="test36" class="option2">줄거리요약</label>
                    </li>
                </ul>

                <ul class="options18">
                    <li><input type="radio" name="op18" id="test37" onclick="test('a')">
                        <label for="test37" class="option1">말을 잘 들어주고 공감해주는 사람</label>
                    </li>
                    <li><input type="radio" name="op18" id="test38" onclick="test('c')">
                        <label for="test38" class="option2">현실적인 조언을 해주는 사람</label>
                    </li>
                </ul>

                <ul class="options19">
                    <li><input type="radio" name="op19" id="test39" onclick="test('b'); MaxResult();">
                        <label for="test39" class="option1">배달 앱을 본다</label>
                    </li>
                    <li><input type="radio" name="op19" id="test40" onclick="test('d'); MaxResult();">
                        <label for="test40" class="option2">얼마 전에 집 앞에 생긴 치킨집에서 치킨을 산다.</label>
                    </li>
                </ul>

                <button class="startbtn">시작하기</button>

                <div class="arrow">
                    <div class='editbtn' style="display:none;"><img src="./public/img/arrow_left.png"
                            class='arrow_left'>
                    </div>
                    <div class='editbtn' style="display:none;"><img src="./public/img/arrow_right.png"
                            class='arrow_right'>
                    </div>
                </div>

                <div class="result" style="display:none;">
                    <!-- <div class="result-img"> -->
                    <img src="#" id="img">
                    <!-- </div> -->
                    <strong id="hashtag"></strong>
                    <strong id="result-title"></strong>
                    <span id="txt"></span>
                    <div><strong>당신에게 추천하는 독립출판물,</strong></div>
                    <div class="recoomend">
                        <img src="#" id="recommend-book">
                        <div>
                            <strong id="book-tit"></strong>

                        </div>
                    </div>
                    <div id="book-story"></div>

                </div>

            </div>
        </div>
    </div>

    <include-html target="./footer.html" completed="footerCompleted"></include-html>

    <script>includeHtml();
        console.log("%c안녕하세요:) 혹시 오류를 발견하거나 피드백을 주고 싶으시다면, sskkanji@gmail.com로 메일을 주시면 정말 감사합니다! 많이 미숙하지만, 저의 Github는 https://github.com/sokkanji 입니다@.@", "font-size: 15px; font-weight: 700; font-family: 'NotoSansKR-Bold'; color: #6B5AE4;");

        let result = [];

        test = (num) => {
            result.push(num);
            return result;
        }

        MaxResult = () => {
            let resultA = 0, resultB = 0, resultC = 0, resultD = 0;
            console.log(result);

            for (let i = 0; i < 20; i++) {
                if (result[i] == 'b') {
                    resultB++;
                }
                else if (result[i] == 'a') {
                    resultA++;
                }
                else if (result[i] == 'c') {
                    resultC++;
                }
                else if (result[i] == 'd') {
                    resultD++;
                }
            }

            let max = Math.max(resultA, resultB, resultC, resultD);
            console.log("max>>" + max + " resultA>>" + resultA + " resultB>>" + resultB + " resultC" + resultC + " resultD" + resultD);

            let txt = document.getElementById("txt");
            let img = document.getElementById("img");
            let img2 = document.getElementById("recommend-book");

            if (max == resultB) {
                console.log("진정한 max >> resultB");
                img.src = "./public/img/test2.jpg";
                document.getElementById("hashtag").innerText =
                    "#논리적인 #한곳만보는 #꼼꼼이 #노력제일";
                document.getElementById("result-title").innerText =
                    "당신은 두뇌회전이 빠르고 관찰력이 뛰어나 이해력이 높습니다.";
                document.getElementById("txt").innerText =
                    "처음 보는 문제도 척척 곧 잘 풀어냅니다. 이런 당신은 페이지수가 많고 주제가 어려운 책이라더도 한 문장씩 읽으면 이해할 수 있다는 것을 스스로 인지하고 있습니다. 반대로, 어떻게 접근해야할지 감을 잡지 못하면 좀 처럼 손이 안 가는 에세이와 같은 감성적인 책은 이해하기 힘들 수 있습니다.";
                img2.src = "./public/img/공동주택_28-16.png";
                document.getElementById("book-tit").innerText = "공동주택 28-16.png";
                document.getElementById("book-story").innerText = "공동주택 28-16.png";
            }
            else if (max == resultA) {
                console.log("진정한 max >> resultA");
                max = "resultA";
                img.src = "./public/img/test5.png";
                document.getElementById("hashtag").innerText =
                    "#정많은 #친화력좋은 #능글맞은 #감성적인";
                document.getElementById("result-title").innerText =
                    "당신은 평범한 사람들의 이야기를 좋아하는 타입입니다.";
                document.getElementById("txt").innerText =
                    "일상에서 볼 수 있는 사람들이 솔직하게 자신의 마음을 털어두고 이야기를 하는 것을 즐깁니다. 당신에게 어울리는 장르는 에세이입니다. 반대로 더 멋진 삶을 위해 노력하라는 메세지가 담긴 자기계발서는 잘 맞지 않을 수 있습니다.";
                img2.src = "./public/img/공동주택_28-16.png";
                document.getElementById("book-tit").innerText = "지금여기를놓친채그때거기를말한들.png";
                document.getElementById("book-story").innerText = "공동주택 28-16.png";
            }
            else if (max == resultC) {
                console.log('진정한 max >> resultC');
                max = "resultC";
                img.src = "./public/img/test4.jpg";
                document.getElementById("hashtag").innerText =
                    "#조용한 #한곳만보는 #소확행 #집중력";
                document.getElementById("result-title").innerText =
                    "당신은 자신이 관심 있는 분야를 확고하게 정하고 파고드는 타입입니다.";
                document.getElementById("txt").innerText =
                    "책의 형식보다는 소재를 더 중요하게 여깁니다. 관심 분야라면, 소설부터 자기계발서까지 가리지 않습니다. 하지만 하나만 바라보는 당신은 예상외로 시야가 좁지 않은 편입니다. 자신이 좋아하는 분야에서 한 관점에 얽매이지 않는 편이라고 말할 수 있습니다. 다양한 시선은 같은 상황이더라도 더 나은 해결법을 생각할 수 있는 재능입니다.";
                img2.src = "./public/img/공동주택_28-16.png";
                document.getElementById("book-tit").innerText = "공동주택 28-16.png";
                document.getElementById("book-story").innerText = "공동주택 28-16.png";
            }
            else if (max == resultD) {
                console.log("진정한 max >> resultD");
                max = "resultD";
                img.src = "./public/img/test3.jpg";
                document.getElementById("hashtag").innerText =
                    "#사람우선 #친화력좋은 #따뜻한 #공감";
                document.getElementById("result-title").innerText =
                    "마음씨가 따뜻해서 언제나 당신 근처에 사람들이 모여듭니다.";
                document.getElementById("txt").innerText =
                    "당신의 주변 사람들은 당신의 따뜻한 기운에 행복감을 느낍니다. 이런 당신은 자신과 닮은 따뜻한 글을 좋아합니다. 작가의 솔직한 문장에 감동을 받을 때도 있습니다. 당신은 자신이 받은 영감을 다른 사람들과 공유를 하고 싶어합니다. 인상깊은 구절을 메모해두었다가 힘든 친구에게 건네주거나 또는 친구가 건네준 구절에 큰 감동을 받기도 합니다.";
                img2.src = "./public/img/공동주택_28-16.png";
                document.getElementById("book-tit").innerText = "공동주택 28-16.png";
                document.getElementById("book-story").innerText = "공동주택 28-16.png";
            }
        }

    </script>
</body>

</html>